<!DOCTYPE html>
<html lang="en" data-no-js>
  {% set pageTitle -%}
  {%- if title -%}{{ title }} | {% endif %}{{ meta.siteName }}
  {%- endset %}

  {% set pageDescription -%}
  {%- if description -%}{{ description }}
  {%- else -%}{{ meta.siteDescription }}
  {%- endif -%}
  {%- endset %}

  {% set pageSocialImg -%}
  {%- if '/blog' in page.url -%}
    {{ meta.url }}/images/social/{{ title | slug }}.png
  {%- else -%}
    {{ meta.url }}/images/social/ryan-mulligan-dev.png
  {%- endif %}
  {%- endset %}

  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Eleventy">

    <title>
      {{ pageTitle }}
    </title>
    <meta name="description" content="{{ description or meta.description }}"/>

    <link rel="icon" href="/favicon/favicon.svg"/>
    <link rel="mask-icon" href="/favicon/favicon.svg" color="#E01A4F">
    <link rel="apple-touch-icon" href="/favicon/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">

    <link rel="stylesheet" href="/assets/css/theme.css">
    <link rel="stylesheet" href="/assets/css/styles.css">

    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:creator" content="@{{ meta.twitterHandle }}"/>
    <meta name="twitter:title" content="{{ pageTitle }}"/>
    <meta name="twitter:description" content="{{ description or meta.description }}"/>
    <meta name="twitter:image" content="{{ pageSocialImg }}"/>
    <meta name="og:title" content="{{ pageTitle }}"/>
    <meta name="og:description" content="{{ description or meta.description }}"/>
    <meta property="og:image" content="{{ pageSocialImg }}"/>

    <script>
      (function () {
        const html = document.documentElement;
        const theme = localStorage.getItem('theme');
        const colorScheme = localStorage.getItem('color-scheme');

        html.removeAttribute("data-no-js");
        colorScheme && html.setAttribute('data-color-scheme', colorScheme);
        theme && html.setAttribute('data-theme', theme);
      })();
    </script>
  </head>

  <body>
    {% include "header.njk" %}

    <main id="main" class="content wrapper flow">
      <h1 class="title">{{ title or meta.siteName}}</h1>
      {% if subtitle %}
        <p class="subtitle">{{ subtitle }}</p>
      {% endif %}
      {% block beforeContent %}{% endblock %}
      {{ content | safe }}
    </main>

    <footer class="footer wrapper">
      <p class="footer-copy">
			© 2015—{% year %} assembled by Ryan Mulligan, with love. Bring it on <a title="Go to the site homepage" href="{{ '/' | url }}">home</a> ⫶ <a href="{{ '/blog/feed.xml' | url }}">RSS feed</a>
      </p>
    </footer>

    <script type="module" src="/assets/js/themes.js"></script>
    <script type="module" src="/assets/js/main.js"></script>
    {% block scripts %}{% endblock %}
    <script async defer src="https://scripts.withcabin.com/hello.js"></script>
  </body>
</html>